<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>58.0</apiVersion>
    <assignments>
        <name>Assign_F_tms_S_o</name>
        <label>Assign F/tms S/o</label>
        <locationX>917</locationX>
        <locationY>1057</locationY>
        <assignmentItems>
            <assignToReference>FTMSSO_record</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Lastest_SO</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_File_No</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_F_tms_S_o_0</name>
        <label>Assign F/tms S/o</label>
        <locationX>1303</locationX>
        <locationY>1050</locationY>
        <assignmentItems>
            <assignToReference>FTMSSO_record</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Lastest_SO</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_File_No</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Lastestnumber_record</name>
        <label>Lastestnumber_record</label>
        <locationX>638</locationX>
        <locationY>1065</locationY>
        <assignmentItems>
            <assignToReference>lastest_record</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Lastest_Advance_shipment</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_File_No</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Lastestnumber_record_0</name>
        <label>Lastestnumber_record</label>
        <locationX>1485</locationX>
        <locationY>1088</locationY>
        <assignmentItems>
            <assignToReference>lastest_record</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Lastest_Advance_shipment</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_File_No</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Check_field_type</name>
        <label>Check field type</label>
        <locationX>1092</locationX>
        <locationY>380</locationY>
        <defaultConnector>
            <targetReference>Check_Master_Record_Type</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>shipment_type_change</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Shipment_Type__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_File_No_0_0</targetReference>
            </connector>
            <label>shipment type change</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_lasest_record</name>
        <label>Check lasest record</label>
        <locationX>909</locationX>
        <locationY>924</locationY>
        <defaultConnector>
            <targetReference>Update_File_No</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>F_tms_s_o</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Lastest_Advance_shipment.Number_in_Month__c</leftValueReference>
                <operator>LessThanOrEqualTo</operator>
                <rightValue>
                    <elementReference>Lastest_SO.Number_in_Month__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Lastest_Advance_shipment</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Lastest_SO</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_F_tms_S_o</targetReference>
            </connector>
            <label>F/tms s/o</label>
        </rules>
        <rules>
            <name>Advanced_Shipment</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Lastest_Advance_shipment.Number_in_Month__c</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <elementReference>Lastest_SO.Number_in_Month__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Lastest_Advance_shipment</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Lastest_SO</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Lastestnumber_record</targetReference>
            </connector>
            <label>Advanced Shipment</label>
        </rules>
        <rules>
            <name>f_tms_so_null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Lastest_SO</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Lastest_Advance_shipment</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Lastestnumber_record</targetReference>
            </connector>
            <label>f/tms/so null</label>
        </rules>
        <rules>
            <name>Advancedshipment_null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Lastest_Advance_shipment</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Lastest_SO</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_F_tms_S_o</targetReference>
            </connector>
            <label>Advanced shipment null</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_lasest_record_0</name>
        <label>Check lasest record</label>
        <locationX>1284</locationX>
        <locationY>920</locationY>
        <defaultConnector>
            <targetReference>Update_File_No</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>F_tms_s_o_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Lastest_Advance_shipment.Number_in_Month__c</leftValueReference>
                <operator>LessThanOrEqualTo</operator>
                <rightValue>
                    <elementReference>Lastest_SO.Number_in_Month__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Lastest_Advance_shipment</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Lastest_SO</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_F_tms_S_o_0</targetReference>
            </connector>
            <label>F/tms s/o</label>
        </rules>
        <rules>
            <name>Advanced_Shipment_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Lastest_Advance_shipment.Number_in_Month__c</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <elementReference>Lastest_SO.Number_in_Month__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Lastest_Advance_shipment</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Lastest_SO</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Lastestnumber_record_0</targetReference>
            </connector>
            <label>Advanced Shipment</label>
        </rules>
        <rules>
            <name>f_tms_so_null_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Lastest_SO</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Lastest_Advance_shipment</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Lastestnumber_record_0</targetReference>
            </connector>
            <label>f/tms/so null</label>
        </rules>
        <rules>
            <name>Advancedshipment_null_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Lastest_Advance_shipment</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Lastest_SO</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_F_tms_S_o_0</targetReference>
            </connector>
            <label>Advanced shipment null</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Master_Record_Type</name>
        <label>Check Master Record Type</label>
        <locationX>1093</locationX>
        <locationY>515</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Ocean_Import</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Master_Record_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Ocean Import</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_lastest_SI</targetReference>
            </connector>
            <label>Ocean Import</label>
        </rules>
        <rules>
            <name>ETD_not_null_ocean_export</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Master_Record_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Ocean Export</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ETD__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Month_ETD__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Record__Prior.Month_ETD__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_lastest_SE_0</targetReference>
            </connector>
            <label>ETD not null ocean export</label>
        </rules>
        <rules>
            <name>Ocean_Export</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Master_Record_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Ocean Export</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ETD__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_lastest_SE</targetReference>
            </connector>
            <label>Ocean Export</label>
        </rules>
    </decisions>
    <environments>Default</environments>
    <formulas>
        <name>File_No_for_update</name>
        <dataType>String</dataType>
        <expression>CASE(TEXT({!$Record.Branch__c}), &apos;Ho Chi Minh&apos;,&apos;SGN&apos;, &apos;Ha Noi&apos;, &apos;HAN&apos;,&apos;Hai Phong&apos;,&apos;HPN&apos;, NULL)+&apos;/&apos; + 
CASE(TEXT({!$Record.Master_Record_Type__c}), &apos;Ocean Export&apos;,&apos;SE&apos;, &apos;Ocean Import&apos;, &apos;SI&apos;, NULL) + &apos;-&apos;+
IF(TEXT({!$Record.Shipment_Type__c})&lt;&gt;NULL ,CASE(TEXT({!$Record.Shipment_Type__c}), &apos;Consol&apos;,&apos;C&apos;, &apos;FCL&apos;, &apos;F&apos;,&apos;LCL&apos;,&apos;L&apos;,&apos;Logistics&apos;,&apos;LOGS&apos;, NULL) +&apos;/&apos;,NULL)+
CASE(TEXT({!$Record.Master_Record_Type__c}), &apos;Ocean Export&apos;,
IF({!ETD_not_null_ocean_export}= FALSE,RIGHT(TEXT(YEAR(DATEVALUE({!$Record.CreatedDate}))),2),RIGHT(TEXT(YEAR({!$Record.ETD__c})),2)), &apos;Ocean Import&apos;, 
RIGHT(TEXT(YEAR(DATEVALUE({!$Record.CreatedDate}))),2), NULL) + &apos;-&apos;  +IF({!ETD_not_null_ocean_export}=FALSE ,LPAD(TEXT(MONTH(DATEVALUE({!$Record.CreatedDate}))),2,&apos;0&apos;),LPAD(TEXT(MONTH({!$Record.ETD__c})),2,&apos;0&apos;))+&apos;/&apos; +LPAD({!number_in_month}, 3 , &apos;0&apos;)</expression>
    </formulas>
    <formulas>
        <name>new_file_no_change_shipmenttype</name>
        <dataType>String</dataType>
        <expression>SUBSTITUTE({!$Record.FileNo__c}, MID( {!$Record.FileNo__c}, 
    FIND(&quot;-&quot;,  {!$Record.FileNo__c}) , 
    FIND(&quot;-&quot;, RIGHT({!$Record.FileNo__c}, LEN({!$Record.FileNo__c}) - FIND(&quot;-&quot;, {!$Record.FileNo__c})))
  )
,(&apos;-&apos;+IF(TEXT({!$Record.Shipment_Type__c})&lt;&gt;NULL ,CASE(TEXT({!$Record.Shipment_Type__c}), &apos;Consol&apos;,&apos;C&apos;, &apos;FCL&apos;, &apos;F&apos;,&apos;LCL&apos;,&apos;L&apos;,&apos;Logistics&apos;,&apos;LOGS&apos;, NULL) +&apos;/&apos;,NULL)
+CASE(TEXT({!$Record.Master_Record_Type__c}), &apos;Ocean Export&apos;,RIGHT(TEXT(YEAR(DATEVALUE({!$Record.CreatedDate}))),2), &apos;Ocean Import&apos;, 
RIGHT(TEXT(YEAR(DATEVALUE({!$Record.CreatedDate}))),2), NULL) 
))</expression>
    </formulas>
    <formulas>
        <name>number_in_month</name>
        <dataType>String</dataType>
        <expression>IF({!ETD_not_null_ocean_export}= FALSE,IF(AND({!lastest_record.Id}=NULL,{!FTMSSO_record.Id}=NULL),&apos;1&apos;,IF(AND({!lastest_record.Id}&lt;&gt;NULL,{!FTMSSO_record.Id}=NULL),
	IF(MONTH(DATEVALUE({!lastest_record.CreatedDate}))&lt;&gt;MONTH(DATEVALUE({!$Record.CreatedDate})),&apos;1&apos;,TEXT(VALUE(RIGHT({!lastest_record.FileNo__c},3))+1)),
	IF(MONTH(DATEVALUE({!FTMSSO_record.CreatedDate}))&lt;&gt;MONTH(DATEVALUE({!$Record.CreatedDate})),&apos;1&apos;,TEXT(VALUE(RIGHT({!FTMSSO_record.JobRequestID__c},3))+1)))),
	IF(AND({!lastest_record.Id}=NULL,{!FTMSSO_record.Id}=NULL),&apos;1&apos;,IF(AND({!lastest_record.Id}&lt;&gt;NULL,{!FTMSSO_record.Id}=NULL),IF(
	NOT(ISNULL({!lastest_record.ETD__c})),
	IF(MONTH(({!lastest_record.ETD__c}))&lt;&gt;MONTH(({!$Record.ETD__c})),&apos;1&apos;,TEXT(VALUE(RIGHT({!lastest_record.FileNo__c},3))+1)),
	IF(MONTH(DATEVALUE({!lastest_record.CreatedDate}))&lt;&gt;MONTH(({!$Record.ETD__c})),&apos;1&apos;,TEXT(VALUE(RIGHT({!lastest_record.FileNo__c},3))+1))
	)
	,IF(NOT(ISNULL({!FTMSSO_record.ETD__c})),
	IF(MONTH(({!FTMSSO_record.ETD__c}))&lt;&gt;MONTH(({!$Record.ETD__c})),&apos;1&apos;,TEXT(VALUE(RIGHT({!FTMSSO_record.JobRequestID__c},3))+1)),
	IF(MONTH(DATEVALUE({!FTMSSO_record.CreatedDate}))&lt;&gt;MONTH(({!$Record.ETD__c})),&apos;1&apos;,TEXT(VALUE(RIGHT({!FTMSSO_record.JobRequestID__c},3))+1))
	)
	)))</expression>
    </formulas>
    <interviewLabel>Advanced Shipment | Trigger Update File No. {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Advanced Shipment | Trigger Update File No.</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>Get_F_tms_S_O_Export_Ocean</name>
        <label>Get F/tms S/O Export Ocean</label>
        <locationX>1490</locationX>
        <locationY>643</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_lasest_record_0</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Check_lasest_record_0</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>JobRequestID__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>RecordTypeId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_record_type_export_ocean_F_tms_S_o.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Month_Created__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Month_Created__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Branch__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Branch__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>ConsolidationID__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>FTMSSO__c</object>
        <outputReference>Lastest_SO</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Number_in_Month__c</queriedFields>
        <queriedFields>CreatedDate</queriedFields>
        <queriedFields>JobRequestID__c</queriedFields>
        <sortField>Number_in_Month__c</sortField>
        <sortOrder>Desc</sortOrder>
    </recordLookups>
    <recordLookups>
        <name>Get_F_tms_S_O_Export_Ocean_0</name>
        <label>Get F/tms S/O Export Ocean</label>
        <locationX>1293</locationX>
        <locationY>646</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_lasest_record_0</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Check_lasest_record_0</targetReference>
        </faultConnector>
        <filterLogic>1 AND 2 AND 3 AND 5 AND (6 OR 4)</filterLogic>
        <filters>
            <field>JobRequestID__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>RecordTypeId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_record_type_export_ocean_F_tms_S_o_0.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Month_ETD__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Month_ETD__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Branch__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Branch__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>ConsolidationID__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Month_Created__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.ETD__c</elementReference>
            </value>
        </filters>
        <object>FTMSSO__c</object>
        <outputReference>Lastest_SO</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Number_in_Month__c</queriedFields>
        <queriedFields>CreatedDate</queriedFields>
        <queriedFields>JobRequestID__c</queriedFields>
        <queriedFields>ETD__c</queriedFields>
        <sortField>Number_in_Month__c</sortField>
        <sortOrder>Desc</sortOrder>
    </recordLookups>
    <recordLookups>
        <name>Get_F_tms_S_O_Import_Ocean</name>
        <label>Get F/tms S/O Import Ocean</label>
        <locationX>920</locationX>
        <locationY>784</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_lasest_record</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Check_lasest_record</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>JobRequestID__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>RecordTypeId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_record_type_import_ocean_F_tms_S_o.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Month_Created__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Month_Created__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Branch__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Branch__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>ConsolidationID__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>FTMSSO__c</object>
        <outputReference>Lastest_SO</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Number_in_Month__c</queriedFields>
        <queriedFields>CreatedDate</queriedFields>
        <queriedFields>JobRequestID__c</queriedFields>
        <sortField>Number_in_Month__c</sortField>
        <sortOrder>Desc</sortOrder>
    </recordLookups>
    <recordLookups>
        <name>Get_lastest_SE</name>
        <label>Get lastest SE</label>
        <locationX>1286</locationX>
        <locationY>516</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_record_type_export_ocean_F_tms_S_o</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Get_record_type_export_ocean_F_tms_S_o</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Master_Record_Type__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Ocean Export</stringValue>
            </value>
        </filters>
        <filters>
            <field>FileNo__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Id</field>
            <operator>NotEqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Month_Created__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Month_Created__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Branch__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Branch__c</elementReference>
            </value>
        </filters>
        <object>AdvancedShipment__c</object>
        <outputReference>Lastest_Advance_shipment</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Number_in_Month__c</queriedFields>
        <queriedFields>CreatedDate</queriedFields>
        <queriedFields>FileNo__c</queriedFields>
        <sortField>Number_in_Month__c</sortField>
        <sortOrder>Desc</sortOrder>
    </recordLookups>
    <recordLookups>
        <name>Get_lastest_SE_0</name>
        <label>Get lastest SE</label>
        <locationX>1099</locationX>
        <locationY>641</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_record_type_export_ocean_F_tms_S_o_0</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Get_record_type_export_ocean_F_tms_S_o_0</targetReference>
        </faultConnector>
        <filterLogic>1 AND 2 AND 3 AND 5 AND ( 6 OR 4)</filterLogic>
        <filters>
            <field>Master_Record_Type__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Ocean Export</stringValue>
            </value>
        </filters>
        <filters>
            <field>FileNo__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Id</field>
            <operator>NotEqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Month_ETD__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Month_ETD__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Branch__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Branch__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Month_Created__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Month_ETD__c</elementReference>
            </value>
        </filters>
        <object>AdvancedShipment__c</object>
        <outputReference>Lastest_Advance_shipment</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Number_in_Month__c</queriedFields>
        <queriedFields>CreatedDate</queriedFields>
        <queriedFields>FileNo__c</queriedFields>
        <queriedFields>ETD__c</queriedFields>
        <sortField>Number_in_Month__c</sortField>
        <sortOrder>Desc</sortOrder>
    </recordLookups>
    <recordLookups>
        <name>Get_lastest_SI</name>
        <label>Get lastest SI</label>
        <locationX>910</locationX>
        <locationY>525</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_record_type_import_ocean_F_tms_S_o</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Get_record_type_import_ocean_F_tms_S_o</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Master_Record_Type__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Ocean Import</stringValue>
            </value>
        </filters>
        <filters>
            <field>FileNo__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Id</field>
            <operator>NotEqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Month_Created__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Month_Created__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Branch__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Branch__c</elementReference>
            </value>
        </filters>
        <object>AdvancedShipment__c</object>
        <outputReference>Lastest_Advance_shipment</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>CreatedDate</queriedFields>
        <queriedFields>FileNo__c</queriedFields>
        <queriedFields>Number_in_Month__c</queriedFields>
        <sortField>Number_in_Month__c</sortField>
        <sortOrder>Desc</sortOrder>
    </recordLookups>
    <recordLookups>
        <name>Get_record_type_export_ocean_F_tms_S_o</name>
        <label>Get record type export ocean F/tms S/o</label>
        <locationX>1484</locationX>
        <locationY>509</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_F_tms_S_O_Export_Ocean</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>OceanExport</stringValue>
            </value>
        </filters>
        <filters>
            <field>SobjectType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>FTMSSO__c</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>RecordType</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_record_type_export_ocean_F_tms_S_o_0</name>
        <label>Get record type export ocean F/tms S/o</label>
        <locationX>1097</locationX>
        <locationY>795</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_F_tms_S_O_Export_Ocean_0</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Get_F_tms_S_O_Export_Ocean_0</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>OceanExport</stringValue>
            </value>
        </filters>
        <filters>
            <field>SobjectType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>FTMSSO__c</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>RecordType</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_record_type_import_ocean_F_tms_S_o</name>
        <label>Get record type import ocean F/tms S/o</label>
        <locationX>913</locationX>
        <locationY>644</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_F_tms_S_O_Import_Ocean</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>OceanImport</stringValue>
            </value>
        </filters>
        <filters>
            <field>SobjectType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>FTMSSO__c</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>RecordType</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_File_No</name>
        <label>Update File No.</label>
        <locationX>1107</locationX>
        <locationY>1166</locationY>
        <inputAssignments>
            <field>CheckClone__c</field>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>FileNo__c</field>
            <value>
                <elementReference>File_No_for_update</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_File_No_0_0</name>
        <label>Update File No.</label>
        <locationX>920</locationX>
        <locationY>364</locationY>
        <inputAssignments>
            <field>FileNo__c</field>
            <value>
                <elementReference>new_file_no_change_shipmenttype</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <start>
        <locationX>972</locationX>
        <locationY>56</locationY>
        <connector>
            <targetReference>Check_field_type</targetReference>
        </connector>
        <filterLogic>or</filterLogic>
        <filters>
            <field>Shipment_Type__c</field>
            <operator>IsChanged</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Branch__c</field>
            <operator>IsChanged</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Master_Record_Type__c</field>
            <operator>IsChanged</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>CheckClone__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>FileNo__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>ETD__c</field>
            <operator>IsChanged</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>AdvancedShipment__c</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Obsolete</status>
    <variables>
        <name>FTMSSO_record</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>FTMSSO__c</objectType>
    </variables>
    <variables>
        <name>Lastest_Advance_shipment</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>AdvancedShipment__c</objectType>
    </variables>
    <variables>
        <name>lastest_record</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>AdvancedShipment__c</objectType>
    </variables>
    <variables>
        <name>Lastest_SO</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>FTMSSO__c</objectType>
    </variables>
</Flow>
