<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>58.0</apiVersion>
    <assignments>
        <name>Assign_block_flow</name>
        <label>Assign block flow</label>
        <locationX>750</locationX>
        <locationY>767</locationY>
        <assignmentItems>
            <assignToReference>recordupdate.Block_flow__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>blockflowcheckbox</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Quote_Line</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Fx_rate</name>
        <label>Assign Fx rate</label>
        <locationX>510</locationX>
        <locationY>576</locationY>
        <assignmentItems>
            <assignToReference>recordupdate.FxRateIDBuying__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Fx_rate.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recordupdate.ExchangeRateBuying__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ExchangeRateBuyingVND</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recordupdate.ExchangeRateBuyingUSD__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ExchangeRateBuyingUSD</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recordupdate.UnitPriceofBuyingFCY__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>UnitPriceBuyingUSD</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recordupdate.UnitPriceofBuyingLocal__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>UnitpriceBuyingVND</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Fx_rate_selling</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Fx_rate_0</name>
        <label>Assign Fx rate</label>
        <locationX>754</locationX>
        <locationY>565</locationY>
        <assignmentItems>
            <assignToReference>recordupdate.UnitPriceofBuyingFCY__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>UnitPriceBuyingUSD</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recordupdate.UnitPriceofBuyingLocal__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>UnitpriceBuyingVND</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recordupdate.UnitPriceofSellingFCY__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>UnitPriceSellingUSD</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recordupdate.UnitPriceofSellingLocal__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>UnitPriceSellingVND</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_block_flow</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Fx_rate_0_0</name>
        <label>Assign Fx rate</label>
        <locationX>943</locationX>
        <locationY>454</locationY>
        <assignmentItems>
            <assignToReference>recordupdate.ExchangeRateBuying__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ExchangeRateBuyingVND</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recordupdate.ExchangeRateBuyingUSD__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ExchangeRateSellingUSD</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recordupdate.UnitPriceofBuyingLocal__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>UnitpriceBuyingVND</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recordupdate.UnitPriceofBuyingFCY__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>UnitPriceBuyingUSD</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_Fx_rate_selling_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Fx_rate_selling</name>
        <label>Assign Fx rate selling</label>
        <locationX>511</locationX>
        <locationY>1047</locationY>
        <assignmentItems>
            <assignToReference>recordupdate.FxRateIDSelling__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Fx_rate_selling.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recordupdate.ExchangeRateSelling__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ExchangeRateSellingVND</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recordupdate.ExchangeRateSellingUSD__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ExchangeRateSellingUSD</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recordupdate.UnitPriceofSellingFCY__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>UnitPriceSellingUSD</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recordupdate.UnitPriceofSellingLocal__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>UnitPriceSellingVND</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_block_flow</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Fx_rate_selling_0</name>
        <label>Assign Fx rate selling</label>
        <locationX>936</locationX>
        <locationY>747</locationY>
        <assignmentItems>
            <assignToReference>recordupdate.ExchangeRateSelling__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ExchangeRateSellingVND</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recordupdate.ExchangeRateSellingUSD__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ExchangeRateSellingUSD</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recordupdate.UnitPriceofSellingFCY__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>UnitPriceSellingUSD</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recordupdate.UnitPriceofSellingLocal__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>UnitPriceSellingVND</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_block_flow</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_record</name>
        <label>Assign record</label>
        <locationX>551</locationX>
        <locationY>333</locationY>
        <assignmentItems>
            <assignToReference>recordupdate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>which_changed</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Usd</name>
        <label>Assign Usd</label>
        <locationX>282</locationX>
        <locationY>640</locationY>
        <assignmentItems>
            <assignToReference>recordupdate.UnitPriceofBuyingFCY__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.UnitPriceofBuyingActual__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Fx_rate_selling</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Usd_0</name>
        <label>Assign Usd</label>
        <locationX>520</locationX>
        <locationY>726</locationY>
        <assignmentItems>
            <assignToReference>recordupdate.UnitPriceofSellingFCY__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.UnitPriceofSellingActual__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_block_flow</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Vnd</name>
        <label>Assign Vnd</label>
        <locationX>50</locationX>
        <locationY>636</locationY>
        <assignmentItems>
            <assignToReference>recordupdate.UnitPriceofBuyingLocal__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.UnitPriceofBuyingActual__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Fx_rate_selling</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Vnd_0</name>
        <label>Assign Vnd</label>
        <locationX>527</locationX>
        <locationY>889</locationY>
        <assignmentItems>
            <assignToReference>recordupdate.UnitPriceofSellingLocal__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.UnitPriceofSellingActual__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_block_flow</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Buying_rate_not_null</name>
        <label>Buying rate not null</label>
        <locationX>191</locationX>
        <locationY>547</locationY>
        <defaultConnector>
            <targetReference>Get_Fx_rate_selling</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>True</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Fx_rate</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Fx_rate</targetReference>
            </connector>
            <label>True</label>
        </rules>
        <rules>
            <name>null_Fxrate_vnd_buying</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Fx_rate</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CurrencyBuying__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>VND</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Vnd</targetReference>
            </connector>
            <label>null Fxrate vnd buying</label>
        </rules>
        <rules>
            <name>null_fx_rate_usd_buying</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Fx_rate</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CurrencyBuying__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>USD</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Usd</targetReference>
            </connector>
            <label>null fx rate usd buying</label>
        </rules>
    </decisions>
    <decisions>
        <name>Selling_rate_not_null</name>
        <label>Selling rate not null</label>
        <locationX>395</locationX>
        <locationY>848</locationY>
        <defaultConnector>
            <targetReference>Assign_block_flow</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>True_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Fx_rate_selling</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Fx_rate_selling</targetReference>
            </connector>
            <label>True</label>
        </rules>
        <rules>
            <name>null_fxrate_vnd_Selling</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Fx_rate_selling</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>recordupdate.CurrencySelling__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>VND</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Vnd_0</targetReference>
            </connector>
            <label>null fxrate vnd Selling</label>
        </rules>
        <rules>
            <name>null_fxrate_usd_selling</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Fx_rate_selling</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>recordupdate.CurrencySelling__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>USD</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Usd_0</targetReference>
            </connector>
            <label>null fxrate usd selling</label>
        </rules>
    </decisions>
    <decisions>
        <name>which_changed</name>
        <label>which changed</label>
        <locationX>518</locationX>
        <locationY>443</locationY>
        <defaultConnector>
            <targetReference>Assign_block_flow</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>ISnew</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>IsnewCheck</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.FxRateIDBuying__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.FxRateIDSelling__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateBuying__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateBuyingUSD__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateSelling__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateSellingUSD__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Fx_rate</targetReference>
            </connector>
            <label>ISnew</label>
        </rules>
        <rules>
            <name>Fx_Rate_ID_is_null</name>
            <conditionLogic>(1 OR 2) AND 3 AND 4 AND 5 AND 6</conditionLogic>
            <conditions>
                <leftValueReference>$Record.FxRateIDBuying__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.FxRateIDSelling__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateBuying__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateBuyingUSD__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateSelling__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateSellingUSD__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Fx_rate</targetReference>
            </connector>
            <label>Fx Rate ID is null</label>
        </rules>
        <rules>
            <name>Exchange_Rate_is_change</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ExchangeRateBuying__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateBuyingUSD__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateSelling__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateSellingUSD__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Fx_rate_0</targetReference>
            </connector>
            <label>Exchange Rate is change</label>
        </rules>
        <rules>
            <name>Fx_Rate_is_change</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.FxRateIDBuying__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.FxRateIDSelling__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Fx_rate_0_0</targetReference>
            </connector>
            <label>Fx Rate is change</label>
        </rules>
        <rules>
            <name>List_Price_is_change</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.UnitPriceofBuyingActual__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.UnitPriceofSellingActual__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <elementReference>True</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Fx_rate_0</targetReference>
            </connector>
            <label>List Price is change</label>
        </rules>
        <rules>
            <name>Isnew_1</name>
            <conditionLogic>1 AND (2  OR 3) AND 4 AND 5 AND 6 AND 7</conditionLogic>
            <conditions>
                <leftValueReference>IsnewCheck</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.FxRateIDBuying__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.FxRateIDSelling__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateBuying__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateBuyingUSD__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateSelling__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateSellingUSD__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Fx_rate_0_0</targetReference>
            </connector>
            <label>Isnew 1</label>
        </rules>
        <rules>
            <name>ISNEW_2</name>
            <conditionLogic>1 AND (2 OR 3) AND 4 AND 5 AND 6 AND 7</conditionLogic>
            <conditions>
                <leftValueReference>IsnewCheck</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.FxRateIDBuying__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.FxRateIDSelling__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateBuying__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateBuyingUSD__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateSelling__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateSellingUSD__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Fx_rate_0</targetReference>
            </connector>
            <label>ISNEW 2</label>
        </rules>
    </decisions>
    <environments>Default</environments>
    <formulas>
        <name>blockflowcheckbox</name>
        <dataType>Boolean</dataType>
        <expression>IF({!recordupdate.Block_flow__c} = TRUE, FALSE, TRUE)</expression>
    </formulas>
    <formulas>
        <name>currencybuying</name>
        <dataType>String</dataType>
        <expression>CASE(TEXT({!$Record.CurrencyBuying__c}), &apos;VND&apos;,&apos;USD&apos;, &apos;USD&apos;,&apos;USD&apos;, &apos;KHR&apos;, &apos;KHR&apos;, &apos;JPY&apos;,&apos;JPY&apos;,&apos;KRW&apos;, &apos;KRW&apos;,&apos;EUR&apos;, &apos;EUR&apos;, &apos;GBP&apos;, &apos;GBP&apos;,&apos;CHF&apos;, &apos;CHF&apos;, null)</expression>
    </formulas>
    <formulas>
        <name>CurrencySelling</name>
        <dataType>String</dataType>
        <expression>CASE(TEXT({!$Record.CurrencySelling__c}), &apos;VND&apos;,&apos;USD&apos;, &apos;USD&apos;,&apos;USD&apos;, &apos;KHR&apos;, &apos;KHR&apos;, &apos;JPY&apos;,&apos;JPY&apos;,&apos;KRW&apos;, &apos;KRW&apos;,&apos;EUR&apos;, &apos;EUR&apos;, &apos;GBP&apos;, &apos;GBP&apos;,&apos;CHF&apos;, &apos;CHF&apos;, null)</expression>
    </formulas>
    <formulas>
        <name>ExchangeRateBuyingUSD</name>
        <dataType>Number</dataType>
        <expression>IF(TEXT({!recordupdate.CurrencyBuying__c})=&apos;VND&apos;,{!recordupdate.FxRateIDBuying__r.BuyingFxRatetoVND__c},{!recordupdate.FxRateIDBuying__r.BuyingFxRatetoUSD__c})</expression>
        <scale>3</scale>
    </formulas>
    <formulas>
        <name>ExchangeRateBuyingVND</name>
        <dataType>Number</dataType>
        <expression>IF(TEXT({!recordupdate.CurrencyBuying__c})=&apos;VND&apos;,1,{!recordupdate.FxRateIDBuying__r.BuyingFxRatetoVND__c})</expression>
        <scale>3</scale>
    </formulas>
    <formulas>
        <name>ExchangeRateSellingUSD</name>
        <dataType>Number</dataType>
        <expression>IF(TEXT({!recordupdate.CurrencySelling__c}) =&apos;VND&apos;,{!recordupdate.FxRateIDSelling__r.SellingFxRatetoVND__c},{!recordupdate.FxRateIDSelling__r.SellingFxRatetoUSD__c})</expression>
        <scale>3</scale>
    </formulas>
    <formulas>
        <name>ExchangeRateSellingVND</name>
        <dataType>Number</dataType>
        <expression>IF(TEXT({!recordupdate.CurrencySelling__c})=&apos;VND&apos;,1, {!recordupdate.FxRateIDSelling__r.SellingFxRatetoVND__c})</expression>
        <scale>3</scale>
    </formulas>
    <formulas>
        <name>ExchangeRateType</name>
        <dataType>String</dataType>
        <expression>IF({!$Record.ServiceType__c} =&apos;COMMISSION&apos;, &apos;Tỷ giá trả theo KB&apos;, &apos;Tỷ giá buổi sáng của VCB&apos;)</expression>
    </formulas>
    <formulas>
        <name>IsnewCheck</name>
        <dataType>Boolean</dataType>
        <expression>ISNEW()</expression>
    </formulas>
    <formulas>
        <name>UnitPriceBuyingUSD</name>
        <dataType>Number</dataType>
        <expression>IF(TEXT({!recordupdate.CurrencyBuying__c})&lt;&gt;&apos;VND&apos;,
IF(ISBLANK({!recordupdate.ExchangeRateBuyingUSD__c}),0,
{!recordupdate.ExchangeRateBuyingUSD__c}*{!recordupdate.UnitPriceofBuyingActual__c}), 
{!recordupdate.UnitPriceofBuyingActual__c}/{!recordupdate.ExchangeRateBuyingUSD__c})</expression>
        <scale>3</scale>
    </formulas>
    <formulas>
        <name>UnitpriceBuyingVND</name>
        <dataType>Number</dataType>
        <expression>IF(ISBLANK({!recordupdate.ExchangeRateBuying__c}),0,{!recordupdate.UnitPriceofBuyingActual__c}*{!recordupdate.ExchangeRateBuying__c})</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>UnitPriceSellingUSD</name>
        <dataType>Number</dataType>
        <expression>IF(TEXT({!recordupdate.CurrencySelling__c})&lt;&gt;&apos;VND&apos;,
IF(ISBLANK({!recordupdate.ExchangeRateSellingUSD__c}),0,
{!recordupdate.UnitPriceofSellingActual__c}*{!recordupdate.ExchangeRateSellingUSD__c}),
{!recordupdate.UnitPriceofSellingActual__c}/{!recordupdate.ExchangeRateSellingUSD__c})</expression>
        <scale>3</scale>
    </formulas>
    <formulas>
        <name>UnitPriceSellingVND</name>
        <dataType>Number</dataType>
        <expression>IF(ISBLANK({!recordupdate.ExchangeRateSelling__c}),0,{!recordupdate.UnitPriceofSellingActual__c}*{!recordupdate.ExchangeRateSelling__c})</expression>
        <scale>0</scale>
    </formulas>
    <interviewLabel>Consol Bill | Update FX rate {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Consol Bill | Update FX rate (new)</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>Get_Fx_rate</name>
        <label>Get Fx rate</label>
        <locationX>308</locationX>
        <locationY>455</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Buying_rate_not_null</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Start_Date__c</field>
            <operator>LessThanOrEqualTo</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </filters>
        <filters>
            <field>End_Date__c</field>
            <operator>GreaterThanOrEqualTo</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </filters>
        <filters>
            <field>Active1__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>ExchangeRateType__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>ExchangeRateType</elementReference>
            </value>
        </filters>
        <filters>
            <field>ExchangeCurrencyFrom1__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>currencybuying</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>FxRate__c</object>
        <sortField>Start_Date__c</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Fx_rate_selling</name>
        <label>Get Fx rate selling</label>
        <locationX>214</locationX>
        <locationY>753</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Selling_rate_not_null</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Start_Date__c</field>
            <operator>LessThanOrEqualTo</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </filters>
        <filters>
            <field>End_Date__c</field>
            <operator>GreaterThanOrEqualTo</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </filters>
        <filters>
            <field>Active1__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>ExchangeRateType__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>ExchangeRateType</elementReference>
            </value>
        </filters>
        <filters>
            <field>ExchangeCurrencyFrom1__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CurrencySelling</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>FxRate__c</object>
        <sortField>Start_Date__c</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_Quote_Line</name>
        <label>Update Quote Line</label>
        <locationX>753</locationX>
        <locationY>948</locationY>
        <inputReference>recordupdate</inputReference>
    </recordUpdates>
    <start>
        <locationX>417</locationX>
        <locationY>48</locationY>
        <connector>
            <targetReference>Assign_record</targetReference>
        </connector>
        <filterFormula>OR(ISNEW(),AND(NOT(ISCHANGED({!$Record.Block_flow__c})),OR(
ISCHANGED({!$Record.FxRateIDBuying__c}),
ISCHANGED({!$Record.FxRateIDSelling__c}),
ISCHANGED({!$Record.ExchangeRateBuyingUSD__c}),
ISCHANGED({!$Record.ExchangeRateBuying__c}),
ISCHANGED({!$Record.ExchangeRateSellingUSD__c}),
ISCHANGED({!$Record.ExchangeRateSelling__c}),
ISCHANGED({!$Record.UnitPriceofBuyingActual__c}),
ISCHANGED({!$Record.UnitPriceofSellingActual__c}))))</filterFormula>
        <object>ConsolBill__c</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
    <triggerOrder>1600</triggerOrder>
    <variables>
        <name>recordupdate</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ConsolBill__c</objectType>
    </variables>
</Flow>
