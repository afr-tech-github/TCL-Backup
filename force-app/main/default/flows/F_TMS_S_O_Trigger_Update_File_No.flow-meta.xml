<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>58.0</apiVersion>
    <assignments>
        <name>Assign_Advanced_Shipment</name>
        <label>Assign Advanced Shipment</label>
        <locationX>828</locationX>
        <locationY>1000</locationY>
        <assignmentItems>
            <assignToReference>lastest_record</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Lastest_advance_shipment</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_File_No</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Advanced_Shipment_0</name>
        <label>Assign Advanced Shipment</label>
        <locationX>1026</locationX>
        <locationY>950</locationY>
        <assignmentItems>
            <assignToReference>lastest_record</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Lastest_advance_shipment</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_File_No</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assigne_test_shipment</name>
        <label>assigne test shipment</label>
        <locationX>882</locationX>
        <locationY>381</locationY>
        <assignmentItems>
            <assignToReference>test</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>New_file_No_shipment_type</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_File_No_0_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Lastestnumber_record</name>
        <label>Lastestnumber_record</label>
        <locationX>673</locationX>
        <locationY>1097</locationY>
        <assignmentItems>
            <assignToReference>lastest_record_SO</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Lastest_SO</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_File_No</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Lastestnumber_record_0</name>
        <label>Lastestnumber_record</label>
        <locationX>1221</locationX>
        <locationY>965</locationY>
        <assignmentItems>
            <assignToReference>lastest_record_SO</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Lastest_SO</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_File_No</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Lastestnumber_record_0_0</name>
        <label>Lastestnumber_record</label>
        <locationX>1464</locationX>
        <locationY>1003</locationY>
        <assignmentItems>
            <assignToReference>latest_record_SO_Air</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Lastest_SO</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_File_No</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Lastestnumber_record_0_0_0</name>
        <label>Lastestnumber_record</label>
        <locationX>1638</locationX>
        <locationY>1084</locationY>
        <assignmentItems>
            <assignToReference>latest_record_SO_Air</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Lastest_SO</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_File_No</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Check_latest_record</name>
        <label>Check latest record</label>
        <locationX>661</locationX>
        <locationY>904</locationY>
        <defaultConnector>
            <targetReference>Update_File_No</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>F_tms_So</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Lastest_SO.Number_in_Month__c</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <elementReference>Lastest_advance_shipment.Number_in_Month__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Lastest_SO</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Lastest_advance_shipment</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Lastestnumber_record</targetReference>
            </connector>
            <label>F/tms So</label>
        </rules>
        <rules>
            <name>Advance_Shipment</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Lastest_SO.Number_in_Month__c</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <elementReference>Lastest_advance_shipment.Number_in_Month__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Lastest_advance_shipment</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Lastest_SO</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Advanced_Shipment</targetReference>
            </connector>
            <label>Advance Shipment</label>
        </rules>
        <rules>
            <name>F_tms_S_o_null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Lastest_SO</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Lastest_advance_shipment</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Advanced_Shipment</targetReference>
            </connector>
            <label>F/tms S/o null</label>
        </rules>
        <rules>
            <name>Advance_shipment_Null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Lastest_SO</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Lastest_advance_shipment</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Lastestnumber_record</targetReference>
            </connector>
            <label>Advance shipment Null</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_latest_record_0</name>
        <label>Check latest record</label>
        <locationX>1114</locationX>
        <locationY>832</locationY>
        <defaultConnector>
            <targetReference>Update_File_No</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>F_tms_So_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Lastest_SO.Number_in_Month__c</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <elementReference>Lastest_advance_shipment.Number_in_Month__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Lastest_SO</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Lastest_advance_shipment</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Lastestnumber_record_0</targetReference>
            </connector>
            <label>F/tms So</label>
        </rules>
        <rules>
            <name>Advance_Shipment_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Lastest_SO.Number_in_Month__c</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <elementReference>Lastest_advance_shipment.Number_in_Month__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Lastest_advance_shipment</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Lastest_SO</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Advanced_Shipment_0</targetReference>
            </connector>
            <label>Advance Shipment</label>
        </rules>
        <rules>
            <name>F_tms_S_o_null_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_lastest_SE</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Lastest_advance_shipment</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Advanced_Shipment_0</targetReference>
            </connector>
            <label>F/tms S/o null</label>
        </rules>
        <rules>
            <name>Advance_shipment_Null_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Lastest_SO</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Lastest_advance_shipment</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Lastestnumber_record_0</targetReference>
            </connector>
            <label>Advance shipment Null</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Master_Record_Type</name>
        <label>Check Master Record Type</label>
        <locationX>1092</locationX>
        <locationY>509</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Ocean_Import</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>OceanImport</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>get_Import_Ocean_Record_Type</targetReference>
            </connector>
            <label>Ocean Import</label>
        </rules>
        <rules>
            <name>ocean_Export_ETD_not_null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>OceanExport</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ETD__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Month_ETD__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Record__Prior.Month_ETD__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>get_Export_Ocean_Record_Type_0</targetReference>
            </connector>
            <label>ocean Export ETD not null</label>
        </rules>
        <rules>
            <name>Ocean_Export</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>OceanExport</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ETD__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>get_Export_Ocean_Record_Type</targetReference>
            </connector>
            <label>Ocean Export</label>
        </rules>
        <rules>
            <name>Air_Export</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>AirExport</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>get_Export_Air_Record_Type</targetReference>
            </connector>
            <label>Air Export</label>
        </rules>
        <rules>
            <name>Air_Import</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>AirImport</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>get_Import_Air_Record_Type</targetReference>
            </connector>
            <label>Air Import</label>
        </rules>
    </decisions>
    <decisions>
        <name>Ischange</name>
        <label>Ischange</label>
        <locationX>1091</locationX>
        <locationY>381</locationY>
        <defaultConnector>
            <targetReference>Check_Master_Record_Type</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>shipment_type</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Shipment_Type__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.JobRequestID__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>assigne_test_shipment</targetReference>
            </connector>
            <label>shipment type</label>
        </rules>
    </decisions>
    <environments>Default</environments>
    <formulas>
        <name>File_No_for_update</name>
        <dataType>String</dataType>
        <expression>CASE(TEXT({!$Record.Branch__c}), &apos;Ho Chi Minh&apos;,&apos;SGN&apos;, &apos;Ha Noi&apos;, &apos;HAN&apos;,&apos;Hai Phong&apos;,&apos;HPN&apos;, NULL)+&apos;/&apos; + 
CASE({!$Record.RecordType.DeveloperName}, &apos;OceanExport&apos;,&apos;SE&apos;, &apos;OceanImport&apos;, &apos;SI&apos;,&apos;AirExport&apos;,&apos;AE&apos;,&apos;AirImport&apos;,&apos;AI&apos;, NULL) + &apos;-&apos; +
IF(OR({!$Record.RecordType.DeveloperName}=&apos;OceanExport&apos;,{!$Record.RecordType.DeveloperName}=&apos;OceanImport&apos;),
CASE(TEXT({!$Record.Shipment_Type__c}), &apos;Consol&apos;,&apos;C&apos;, &apos;FCL&apos;, &apos;F&apos;,&apos;LCL&apos;,&apos;L&apos;,&apos;Logistics&apos;,&apos;LOGS&apos;, NULL)+ &apos;/&apos; ,NULL )+
 CASE({!$Record.RecordType.DeveloperName}, &apos;OceanExport&apos;,
 IF(ISNULL({!$Record.Month_ETD__c}),
 RIGHT(TEXT(YEAR({!$Record.ETD__c})),2),RIGHT(TEXT(YEAR(DATEVALUE({!$Record.CreatedDate}))),2)), &apos;OceanImport&apos;, 
RIGHT(TEXT(YEAR(DATEVALUE({!$Record.CreatedDate}))),2),&apos;AirExport&apos;,
RIGHT(TEXT(YEAR(DATEVALUE({!$Record.CreatedDate}))),2),&apos;AirImport&apos;,
RIGHT(TEXT(YEAR(DATEVALUE({!$Record.CreatedDate}))),2), NULL)+ &apos;-&apos;  + 
IF({!ocean_Export_ETD_not_null}=TRUE,LPAD(TEXT(MONTH({!$Record.ETD__c})),2,&apos;0&apos;),LPAD(TEXT(MONTH(DATEVALUE({!$Record.CreatedDate}))),2,&apos;0&apos; ))+&apos;/&apos; + 
CASE({!$Record.RecordType.DeveloperName}, &apos;OceanExport&apos;,LPAD({!number_in_month}, 3 , &apos;0&apos;), &apos;OceanImport&apos;, LPAD({!number_in_month}, 3 , &apos;0&apos;),&apos;AirExport&apos;,LPAD({!number_in_month_air}, 3 , &apos;0&apos;),&apos;AirImport&apos;,
LPAD({!number_in_month_air}, 3 , &apos;0&apos;), NULL)</expression>
    </formulas>
    <formulas>
        <name>New_file_No_shipment_type</name>
        <dataType>String</dataType>
        <expression>SUBSTITUTE({!$Record.JobRequestID__c}, MID( {!$Record.JobRequestID__c}, 
    FIND(&quot;-&quot;,  {!$Record.JobRequestID__c}) , 
    FIND(&quot;-&quot;, RIGHT({!$Record.JobRequestID__c}, LEN({!$Record.JobRequestID__c}) - FIND(&quot;-&quot;, {!$Record.JobRequestID__c})))
  )
,(&apos;-&apos;+IF(OR({!$Record.RecordType.DeveloperName}=&apos;OceanExport&apos;,{!$Record.RecordType.DeveloperName}=&apos;OceanImport&apos;),
CASE(TEXT({!$Record.Shipment_Type__c}), &apos;Consol&apos;,&apos;C&apos;, &apos;FCL&apos;, &apos;F&apos;,&apos;LCL&apos;,&apos;L&apos;,&apos;Logistics&apos;,&apos;LOGS&apos;, NULL)+ &apos;/&apos; ,NULL )+CASE({!$Record.RecordType.DeveloperName}, &apos;OceanExport&apos;,RIGHT(TEXT(YEAR(DATEVALUE({!$Record.CreatedDate}))),2), &apos;OceanImport&apos;, 
RIGHT(TEXT(YEAR(DATEVALUE({!$Record.CreatedDate}))),2),&apos;AirExport&apos;,RIGHT(TEXT(YEAR(DATEVALUE({!$Record.CreatedDate}))),2),&apos;AirImport&apos;,RIGHT(TEXT(YEAR(DATEVALUE({!$Record.CreatedDate}))),2), NULL) 
))</expression>
    </formulas>
    <formulas>
        <name>number_in_month</name>
        <dataType>String</dataType>
        <expression>IF({!ocean_Export_ETD_not_null}=FALSE,IF(AND({!lastest_record.Id}=NULL,{!lastest_record_SO.Id}=NULL),&apos;1&apos;,IF(AND({!lastest_record.Id}&lt;&gt;NULL,{!lastest_record_SO.Id}=NULL),
IF(MONTH(DATEVALUE({!lastest_record.CreatedDate}))&lt;&gt;MONTH(DATEVALUE({!$Record.CreatedDate})),&apos;1&apos;,TEXT(VALUE(RIGHT({!lastest_record.FileNo__c},3))+1)),
IF(MONTH(DATEVALUE({!lastest_record_SO.CreatedDate}))&lt;&gt;MONTH(DATEVALUE({!$Record.CreatedDate})),&apos;1&apos;,TEXT(VALUE(RIGHT({!lastest_record_SO.JobRequestID__c},3))+1)))),
IF(AND({!lastest_record.Id}=NULL,{!lastest_record_SO.Id}=NULL),&apos;1&apos;,IF(AND({!lastest_record.Id}&lt;&gt;NULL,{!lastest_record_SO.Id}=NULL),IF(NOT(ISNULL({!lastest_record.ETD__c})),
IF(MONTH({!lastest_record.ETD__c})&lt;&gt;MONTH({!$Record.ETD__c}),&apos;1&apos;,TEXT(VALUE(RIGHT({!lastest_record.FileNo__c},3))+1)),
IF(MONTH(DATEVALUE({!lastest_record.CreatedDate}))&lt;&gt;MONTH({!$Record.ETD__c}),&apos;1&apos;,TEXT(VALUE(RIGHT({!lastest_record.FileNo__c},3))+1)))
,IF(NOT(ISNULL({!lastest_record_SO.ETD__c})),
IF(MONTH({!lastest_record_SO.ETD__c})&lt;&gt;MONTH({!$Record.ETD__c}),&apos;1&apos;,TEXT(VALUE(RIGHT({!lastest_record_SO.JobRequestID__c},3))+1)),
IF(MONTH(DATEVALUE({!lastest_record_SO.CreatedDate}))&lt;&gt;MONTH({!$Record.ETD__c}),&apos;1&apos;,TEXT(VALUE(RIGHT({!lastest_record_SO.JobRequestID__c},3))+1)))
)))</expression>
    </formulas>
    <formulas>
        <name>number_in_month_air</name>
        <dataType>String</dataType>
        <expression>IF({!latest_record_SO_Air.Id}=NULL,&apos;1&apos;,IF(MONTH(DATEVALUE({!latest_record_SO_Air.CreatedDate}))&lt;&gt;MONTH(DATEVALUE({!$Record.CreatedDate})),&apos;1&apos;,TEXT(VALUE(RIGHT({!latest_record_SO_Air.JobRequestID__c},3))+1)))</expression>
    </formulas>
    <interviewLabel>F/TMS S/O | Trigger Update File No. {!$Flow.CurrentDateTime}</interviewLabel>
    <label>F/TMS S/O | Trigger Update File No.</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>Get_Advanced_Shipment</name>
        <label>Get Advanced Shipment</label>
        <locationX>682</locationX>
        <locationY>676</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_latest_record</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Check_latest_record</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Master_Record_Type__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Ocean Import</stringValue>
            </value>
        </filters>
        <filters>
            <field>FileNo__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Month_Created__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Month_Created__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Branch__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Branch__c</elementReference>
            </value>
        </filters>
        <object>AdvancedShipment__c</object>
        <outputReference>Lastest_advance_shipment</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>CreatedDate</queriedFields>
        <queriedFields>Number_in_Month__c</queriedFields>
        <queriedFields>FileNo__c</queriedFields>
        <sortField>Number_in_Month__c</sortField>
        <sortOrder>Desc</sortOrder>
    </recordLookups>
    <recordLookups>
        <name>Get_Advanced_Shipment_0</name>
        <label>Get Advanced Shipment</label>
        <locationX>946</locationX>
        <locationY>827</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_latest_record_0</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Check_latest_record_0</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Master_Record_Type__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Ocean Export</stringValue>
            </value>
        </filters>
        <filters>
            <field>FileNo__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Month_Created__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Month_Created__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Branch__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Branch__c</elementReference>
            </value>
        </filters>
        <object>AdvancedShipment__c</object>
        <outputReference>Lastest_advance_shipment</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>CreatedDate</queriedFields>
        <queriedFields>Number_in_Month__c</queriedFields>
        <queriedFields>FileNo__c</queriedFields>
        <sortField>Number_in_Month__c</sortField>
        <sortOrder>Desc</sortOrder>
    </recordLookups>
    <recordLookups>
        <name>Get_Advanced_Shipment_0_0</name>
        <label>Get Advanced Shipment</label>
        <locationX>1314</locationX>
        <locationY>820</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_latest_record_0</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Check_latest_record_0</targetReference>
        </faultConnector>
        <filterLogic>1 AND 2 AND (3 OR 5 ) AND 4</filterLogic>
        <filters>
            <field>Master_Record_Type__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Ocean Export</stringValue>
            </value>
        </filters>
        <filters>
            <field>FileNo__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Month_ETD__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Month_ETD__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Branch__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Branch__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Month_Created__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Month_ETD__c</elementReference>
            </value>
        </filters>
        <object>AdvancedShipment__c</object>
        <outputReference>Lastest_advance_shipment</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>CreatedDate</queriedFields>
        <queriedFields>Number_in_Month__c</queriedFields>
        <queriedFields>FileNo__c</queriedFields>
        <queriedFields>ETD__c</queriedFields>
        <sortField>Number_in_Month__c</sortField>
        <sortOrder>Desc</sortOrder>
    </recordLookups>
    <recordLookups>
        <name>get_Export_Air_Record_Type</name>
        <label>get Export Air Record Type</label>
        <locationX>1465</locationX>
        <locationY>677</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_lastest_AE</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>AirExport</stringValue>
            </value>
        </filters>
        <filters>
            <field>SobjectType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>FTMSSO__c</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>RecordType</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_Export_Ocean_Record_Type</name>
        <label>get Export Ocean Record Type</label>
        <locationX>821</locationX>
        <locationY>679</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_lastest_SE</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>OceanExport</stringValue>
            </value>
        </filters>
        <filters>
            <field>SobjectType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>FTMSSO__c</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>RecordType</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_Export_Ocean_Record_Type_0</name>
        <label>get Export Ocean Record Type</label>
        <locationX>1128</locationX>
        <locationY>683</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_lastest_SE_0</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Get_lastest_SE_0</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>OceanExport</stringValue>
            </value>
        </filters>
        <filters>
            <field>SobjectType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>FTMSSO__c</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>RecordType</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_Import_Air_Record_Type</name>
        <label>get Import Air Record Type</label>
        <locationX>1625</locationX>
        <locationY>671</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_lastest_AI</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>AirImport</stringValue>
            </value>
        </filters>
        <filters>
            <field>SobjectType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>FTMSSO__c</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>RecordType</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_Import_Ocean_Record_Type</name>
        <label>get Import Ocean Record Type</label>
        <locationX>839</locationX>
        <locationY>515</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_lastest_SI</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>OceanImport</stringValue>
            </value>
        </filters>
        <filters>
            <field>SobjectType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>FTMSSO__c</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>RecordType</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_lastest_AE</name>
        <label>Get lastest AE</label>
        <locationX>1467</locationX>
        <locationY>816</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Lastestnumber_record_0_0</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Lastestnumber_record_0_0</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>JobRequestID__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>RecordTypeId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>get_Export_Air_Record_Type.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Id</field>
            <operator>NotEqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Month_Created__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Month_Created__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Branch__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Branch__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>ConsolidationID__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>FTMSSO__c</object>
        <outputReference>Lastest_SO</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>CreatedDate</queriedFields>
        <queriedFields>Number_in_Month__c</queriedFields>
        <queriedFields>JobRequestID__c</queriedFields>
        <sortField>Number_in_Month__c</sortField>
        <sortOrder>Desc</sortOrder>
    </recordLookups>
    <recordLookups>
        <name>Get_lastest_AI</name>
        <label>Get lastest AI</label>
        <locationX>1632</locationX>
        <locationY>800</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Lastestnumber_record_0_0_0</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Lastestnumber_record_0_0_0</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>JobRequestID__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>RecordTypeId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>get_Import_Air_Record_Type.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Id</field>
            <operator>NotEqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Month_Created__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Month_Created__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Branch__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Branch__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>ConsolidationID__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>FTMSSO__c</object>
        <outputReference>Lastest_SO</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>JobRequestID__c</queriedFields>
        <queriedFields>Number_in_Month__c</queriedFields>
        <queriedFields>CreatedDate</queriedFields>
        <sortField>Number_in_Month__c</sortField>
        <sortOrder>Desc</sortOrder>
    </recordLookups>
    <recordLookups>
        <name>Get_lastest_SE</name>
        <label>Get lastest SE</label>
        <locationX>946</locationX>
        <locationY>687</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Advanced_Shipment_0</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Get_Advanced_Shipment_0</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>JobRequestID__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>RecordTypeId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>get_Export_Ocean_Record_Type.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Id</field>
            <operator>NotEqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Month_Created__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Month_Created__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Branch__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Branch__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>ConsolidationID__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>FTMSSO__c</object>
        <outputReference>Lastest_SO</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Number_in_Month__c</queriedFields>
        <queriedFields>CreatedDate</queriedFields>
        <queriedFields>JobRequestID__c</queriedFields>
        <sortField>Number_in_Month__c</sortField>
        <sortOrder>Desc</sortOrder>
    </recordLookups>
    <recordLookups>
        <name>Get_lastest_SE_0</name>
        <label>Get lastest SE</label>
        <locationX>1308</locationX>
        <locationY>675</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Advanced_Shipment_0_0</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Get_Advanced_Shipment_0_0</targetReference>
        </faultConnector>
        <filterLogic>1 AND 2 AND 3 AND (4 OR 7) AND 5 AND 6</filterLogic>
        <filters>
            <field>JobRequestID__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>RecordTypeId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>get_Export_Ocean_Record_Type_0.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Id</field>
            <operator>NotEqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Month_ETD__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Month_ETD__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Branch__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Branch__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>ConsolidationID__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Month_Created__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Month_ETD__c</elementReference>
            </value>
        </filters>
        <object>FTMSSO__c</object>
        <outputReference>Lastest_SO</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Number_in_Month__c</queriedFields>
        <queriedFields>CreatedDate</queriedFields>
        <queriedFields>JobRequestID__c</queriedFields>
        <queriedFields>ETD__c</queriedFields>
        <sortField>Number_in_Month__c</sortField>
        <sortOrder>Desc</sortOrder>
    </recordLookups>
    <recordLookups>
        <name>Get_lastest_SI</name>
        <label>Get lastest SI</label>
        <locationX>685</locationX>
        <locationY>510</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Advanced_Shipment</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Get_Advanced_Shipment</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>JobRequestID__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>RecordTypeId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>get_Import_Ocean_Record_Type.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Id</field>
            <operator>NotEqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Month_Created__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Month_Created__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Branch__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Branch__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>ConsolidationID__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>FTMSSO__c</object>
        <outputReference>Lastest_SO</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>JobRequestID__c</queriedFields>
        <queriedFields>CreatedDate</queriedFields>
        <queriedFields>Number_in_Month__c</queriedFields>
        <sortField>Number_in_Month__c</sortField>
        <sortOrder>Desc</sortOrder>
    </recordLookups>
    <recordUpdates>
        <name>Update_File_No</name>
        <label>Update File No.</label>
        <locationX>1133</locationX>
        <locationY>1095</locationY>
        <inputAssignments>
            <field>CheckClone__c</field>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>JobRequestID__c</field>
            <value>
                <elementReference>File_No_for_update</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_File_No_0_0</name>
        <label>Update File No.</label>
        <locationX>683</locationX>
        <locationY>382</locationY>
        <inputAssignments>
            <field>JobRequestID__c</field>
            <value>
                <elementReference>New_file_No_shipment_type</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <start>
        <locationX>970</locationX>
        <locationY>49</locationY>
        <connector>
            <targetReference>Ischange</targetReference>
        </connector>
        <filterLogic>6 AND (1 OR 2 OR 3 OR 4 OR 5 OR 7)</filterLogic>
        <filters>
            <field>CheckClone__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Shipment_Type__c</field>
            <operator>IsChanged</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>JobRequestID__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Branch__c</field>
            <operator>IsChanged</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>RecordTypeId</field>
            <operator>IsChanged</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>ConsolidationID__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>ETD__c</field>
            <operator>IsChanged</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>FTMSSO__c</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Obsolete</status>
    <triggerOrder>200</triggerOrder>
    <variables>
        <name>Lastest_advance_shipment</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>AdvancedShipment__c</objectType>
    </variables>
    <variables>
        <name>lastest_record</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>AdvancedShipment__c</objectType>
    </variables>
    <variables>
        <name>lastest_record_SO</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>FTMSSO__c</objectType>
    </variables>
    <variables>
        <name>Lastest_SO</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>FTMSSO__c</objectType>
    </variables>
    <variables>
        <name>latest_record_SO_Air</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>FTMSSO__c</objectType>
    </variables>
    <variables>
        <name>test</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
