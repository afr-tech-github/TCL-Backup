<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>58.0</apiVersion>
    <assignments>
        <name>Assign_block_flow</name>
        <label>Assign block flow</label>
        <locationX>1577</locationX>
        <locationY>656</locationY>
        <assignmentItems>
            <assignToReference>SOLforupdate.BlockFlow__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>blockflowcheckbox</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_SOL</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Fx_rate</name>
        <label>Assign Fx rate</label>
        <locationX>852</locationX>
        <locationY>636</locationY>
        <assignmentItems>
            <assignToReference>SOLforupdate.FxRateID__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Fx_rate.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SOLforupdate.ExchangeRateBuying__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ExchangeRateBuyingVND</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SOLforupdate.ExchangeRateBuyingUSD__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ExchangeRateBuyingUSD</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SOLforupdate.BuyingListPriceFCY__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>BuyingListPriceUSD</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SOLforupdate.BuyingListPriceLocal__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>BuyingListPriceVND</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Fx_rate_selling</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Fx_rate_0</name>
        <label>Assign Fx rate</label>
        <locationX>1150</locationX>
        <locationY>673</locationY>
        <assignmentItems>
            <assignToReference>SOLforupdate.BuyingListPriceFCY__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>BuyingListPriceUSD</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SOLforupdate.BuyingListPriceLocal__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>BuyingListPriceVND</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SOLforupdate.SellingListPriceFCY__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SellingListPriceUSD</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SOLforupdate.SellingListPriceLocal__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SellingListPriceVND</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_block_flow</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Fx_rate_0_0</name>
        <label>Assign Fx rate</label>
        <locationX>1611</locationX>
        <locationY>385</locationY>
        <assignmentItems>
            <assignToReference>SOLforupdate.ExchangeRateBuying__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ExchangeRateBuyingVND</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SOLforupdate.ExchangeRateBuyingUSD__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ExchangeRateBuyingUSD</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SOLforupdate.BuyingListPriceFCY__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>BuyingListPriceUSD</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SOLforupdate.BuyingListPriceLocal__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>BuyingListPriceVND</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_Fx_rate_selling_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Fx_rate_selling</name>
        <label>Assign Fx rate selling</label>
        <locationX>994</locationX>
        <locationY>883</locationY>
        <assignmentItems>
            <assignToReference>SOLforupdate.FxRateIDSelling__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Fx_rate_selling.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SOLforupdate.ExchangeRateSelling__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ExchangeRateSellingVND</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SOLforupdate.ExchangeRateSellingUSD__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ExchangeRateSellingUSD</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SOLforupdate.SellingListPriceFCY__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SellingListPriceUSD</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SOLforupdate.SellingListPriceLocal__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SellingListPriceVND</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_block_flow</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Fx_rate_selling_0</name>
        <label>Assign Fx rate selling</label>
        <locationX>1774</locationX>
        <locationY>760</locationY>
        <assignmentItems>
            <assignToReference>SOLforupdate.ExchangeRateSelling__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ExchangeRateSellingVND</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SOLforupdate.ExchangeRateSellingUSD__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ExchangeRateSellingUSD</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SOLforupdate.SellingListPriceFCY__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SellingListPriceUSD</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SOLforupdate.SellingListPriceLocal__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SellingListPriceVND</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_block_flow</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_record</name>
        <label>Assign record</label>
        <locationX>1041</locationX>
        <locationY>355</locationY>
        <assignmentItems>
            <assignToReference>SOLforupdate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>which_changed</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_USD</name>
        <label>Assign USD</label>
        <locationX>580</locationX>
        <locationY>566</locationY>
        <assignmentItems>
            <assignToReference>SOLforupdate.BuyingListPriceFCY__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.BuyingListPriceActual__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Fx_rate_selling</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_USD_0</name>
        <label>Assign USD</label>
        <locationX>1118</locationX>
        <locationY>813</locationY>
        <assignmentItems>
            <assignToReference>SOLforupdate.SellingListPriceFCY__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.SellingListPriceActual__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_block_flow</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Vn</name>
        <label>Assign Vn</label>
        <locationX>50</locationX>
        <locationY>621</locationY>
        <assignmentItems>
            <assignToReference>SOLforupdate.BuyingListPriceLocal__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.BuyingListPriceActual__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Fx_rate_selling</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Vn_Selling</name>
        <label>Assign Vn Selling</label>
        <locationX>817</locationX>
        <locationY>862</locationY>
        <assignmentItems>
            <assignToReference>SOLforupdate.SellingListPriceLocal__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.SellingListPriceActual__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_block_flow</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Buying_rate_not_null</name>
        <label>Buying rate not null</label>
        <locationX>433</locationX>
        <locationY>440</locationY>
        <defaultConnector>
            <targetReference>Get_Fx_rate_selling</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>True</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Fx_rate</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Fx_rate</targetReference>
            </connector>
            <label>True</label>
        </rules>
        <rules>
            <name>null_Fxrate_vnd_buying</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Fx_rate</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Currency_Buying__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>VND</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Vn</targetReference>
            </connector>
            <label>null Fxrate vnd buying</label>
        </rules>
        <rules>
            <name>null_fx_rate_usd_buying</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Fx_rate</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Currency_Buying__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>USD</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_USD</targetReference>
            </connector>
            <label>null fx rate usd buying</label>
        </rules>
    </decisions>
    <decisions>
        <name>Selling_rate_not_null</name>
        <label>Selling rate not null</label>
        <locationX>980</locationX>
        <locationY>739</locationY>
        <defaultConnector>
            <targetReference>Assign_block_flow</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>True_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Fx_rate_selling</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Fx_rate_selling</targetReference>
            </connector>
            <label>True</label>
        </rules>
        <rules>
            <name>null_Fxrate_vnd_selling</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Fx_rate_selling</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CurrencySelling__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>VND</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Vn_Selling</targetReference>
            </connector>
            <label>null Fxrate vnd selling</label>
        </rules>
        <rules>
            <name>null_fx_rate_usd_selling</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Fx_rate_selling</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CurrencySelling__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>USD</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_USD_0</targetReference>
            </connector>
            <label>null fx rate usd selling</label>
        </rules>
    </decisions>
    <decisions>
        <name>which_changed</name>
        <label>which changed</label>
        <locationX>1039</locationX>
        <locationY>477</locationY>
        <defaultConnector>
            <targetReference>Assign_block_flow</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Isnew</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>ISnewCheck</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.FxRateID__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.FxRateIDSelling__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateBuying__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateBuyingUSD__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateSelling__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateSellingUSD__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Fx_rate</targetReference>
            </connector>
            <label>Isnew</label>
        </rules>
        <rules>
            <name>Isnew_2</name>
            <conditionLogic>1 AND (2 OR 3) AND (4 OR 5 OR 6 OR 7)</conditionLogic>
            <conditions>
                <leftValueReference>ISnewCheck</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.FxRateID__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.FxRateIDSelling__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateBuying__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateBuyingUSD__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateSelling__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateSellingUSD__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Fx_rate_0</targetReference>
            </connector>
            <label>Isnew 2</label>
        </rules>
        <rules>
            <name>Isnew_1</name>
            <conditionLogic>1 AND (2 OR 3)</conditionLogic>
            <conditions>
                <leftValueReference>ISnewCheck</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.FxRateID__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.FxRateIDSelling__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Fx_rate_0_0</targetReference>
            </connector>
            <label>Isnew 1</label>
        </rules>
        <rules>
            <name>Exchange_Rate_is_change</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ExchangeRateBuying__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateBuyingUSD__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateSelling__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateSellingUSD__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Fx_rate_0</targetReference>
            </connector>
            <label>Exchange Rate is change</label>
        </rules>
        <rules>
            <name>Fx_Rate_is_change</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.FxRateID__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.FxRateIDSelling__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Fx_rate_0_0</targetReference>
            </connector>
            <label>Fx Rate is change</label>
        </rules>
        <rules>
            <name>List_Price_is_change</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.BuyingListPriceActual__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SellingListPriceActual__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Fx_rate_0</targetReference>
            </connector>
            <label>List Price is change</label>
        </rules>
        <rules>
            <name>Fx_Rate_ID_is_null</name>
            <conditionLogic>(1 OR 2) AND 3 AND 4 AND 5 AND 6</conditionLogic>
            <conditions>
                <leftValueReference>$Record.FxRateID__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.FxRateIDSelling__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateBuying__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateBuyingUSD__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateSelling__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ExchangeRateSellingUSD__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Fx_rate</targetReference>
            </connector>
            <label>Fx Rate ID is null</label>
        </rules>
    </decisions>
    <environments>Default</environments>
    <formulas>
        <name>blockflowcheckbox</name>
        <dataType>Boolean</dataType>
        <expression>IF({!SOLforupdate.BlockFlow__c} = TRUE, FALSE, TRUE)</expression>
    </formulas>
    <formulas>
        <name>BuyingListPriceUSD</name>
        <dataType>Number</dataType>
        <expression>IF(TEXT({!SOLforupdate.Currency_Buying__c})&lt;&gt;&apos;VND&apos;,IF(ISBLANK({!SOLforupdate.ExchangeRateBuyingUSD__c}),0,{!SOLforupdate.ExchangeRateBuyingUSD__c}*{!SOLforupdate.BuyingListPriceActual__c}), {!SOLforupdate.BuyingListPriceActual__c}/{!SOLforupdate.ExchangeRateBuyingUSD__c})</expression>
        <scale>3</scale>
    </formulas>
    <formulas>
        <name>BuyingListPriceVND</name>
        <dataType>Number</dataType>
        <expression>IF(ISBLANK({!SOLforupdate.ExchangeRateBuying__c}),0,{!SOLforupdate.BuyingListPriceActual__c}*{!SOLforupdate.ExchangeRateBuying__c})</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>CurrencyBuying</name>
        <dataType>String</dataType>
        <expression>CASE(TEXT({!$Record.Currency_Buying__c}), &apos;VND&apos;,&apos;USD&apos;, &apos;USD&apos;,&apos;USD&apos;, &apos;KHR&apos;, &apos;KHR&apos;, &apos;JPY&apos;,&apos;JPY&apos;,&apos;KRW&apos;, &apos;KRW&apos;,&apos;EUR&apos;, &apos;EUR&apos;, &apos;GBP&apos;, &apos;GBP&apos;,&apos;CHF&apos;, &apos;CHF&apos;, null)</expression>
    </formulas>
    <formulas>
        <name>CurrencySelling</name>
        <dataType>String</dataType>
        <expression>CASE(TEXT({!$Record.CurrencySelling__c}), &apos;VND&apos;,&apos;USD&apos;, &apos;USD&apos;,&apos;USD&apos;, &apos;KHR&apos;, &apos;KHR&apos;, &apos;JPY&apos;,&apos;JPY&apos;,&apos;KRW&apos;, &apos;KRW&apos;,&apos;EUR&apos;, &apos;EUR&apos;, &apos;GBP&apos;, &apos;GBP&apos;,&apos;CHF&apos;, &apos;CHF&apos;, null)</expression>
    </formulas>
    <formulas>
        <name>ExchangeRateBuyingUSD</name>
        <dataType>Number</dataType>
        <expression>IF(TEXT({!SOLforupdate.Currency_Buying__c})=&apos;VND&apos;,{!SOLforupdate.FxRateID__r.BuyingFxRatetoVND__c},{!SOLforupdate.FxRateID__r.BuyingFxRatetoUSD__c})</expression>
        <scale>3</scale>
    </formulas>
    <formulas>
        <name>ExchangeRateBuyingVND</name>
        <dataType>Number</dataType>
        <expression>IF(TEXT({!SOLforupdate.Currency_Buying__c})=&apos;VND&apos;,1,{!SOLforupdate.FxRateID__r.BuyingFxRatetoVND__c})</expression>
        <scale>3</scale>
    </formulas>
    <formulas>
        <name>ExchangeRateSellingUSD</name>
        <dataType>Number</dataType>
        <expression>IF(TEXT({!SOLforupdate.CurrencySelling__c}) =&apos;VND&apos;,{!SOLforupdate.FxRateIDSelling__r.SellingFxRatetoVND__c},{!SOLforupdate.FxRateIDSelling__r.SellingFxRatetoUSD__c})</expression>
        <scale>3</scale>
    </formulas>
    <formulas>
        <name>ExchangeRateSellingVND</name>
        <dataType>Number</dataType>
        <expression>IF(TEXT({!SOLforupdate.CurrencySelling__c})=&apos;VND&apos;,1, {!SOLforupdate.FxRateIDSelling__r.SellingFxRatetoVND__c})</expression>
        <scale>3</scale>
    </formulas>
    <formulas>
        <name>ISnewCheck</name>
        <dataType>Boolean</dataType>
        <expression>ISNEW()</expression>
    </formulas>
    <formulas>
        <name>SellingListPriceUSD</name>
        <dataType>Number</dataType>
        <expression>IF(TEXT({!SOLforupdate.CurrencySelling__c})&lt;&gt;&apos;VND&apos;,IF(ISBLANK({!SOLforupdate.ExchangeRateSellingUSD__c}),0,{!SOLforupdate.SellingListPriceActual__c}*{!SOLforupdate.ExchangeRateSellingUSD__c}),{!SOLforupdate.SellingListPriceActual__c}/{!SOLforupdate.ExchangeRateSellingUSD__c})</expression>
        <scale>3</scale>
    </formulas>
    <formulas>
        <name>SellingListPriceVND</name>
        <dataType>Number</dataType>
        <expression>IF(ISBLANK({!SOLforupdate.ExchangeRateSelling__c}),0,{!SOLforupdate.SellingListPriceActual__c}*{!SOLforupdate.ExchangeRateSelling__c})</expression>
        <scale>0</scale>
    </formulas>
    <interviewLabel>SI | Update FX rate {!$Flow.CurrentDateTime}</interviewLabel>
    <label>SI | Update FX rate</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>Get_Fx_rate</name>
        <label>Get Fx rate</label>
        <locationX>703</locationX>
        <locationY>386</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Buying_rate_not_null</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Start_Date__c</field>
            <operator>LessThanOrEqualTo</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </filters>
        <filters>
            <field>End_Date__c</field>
            <operator>GreaterThanOrEqualTo</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </filters>
        <filters>
            <field>Active1__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>ExchangeRateType__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Tỷ giá buổi sáng của VCB</stringValue>
            </value>
        </filters>
        <filters>
            <field>ExchangeCurrencyFrom1__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CurrencyBuying</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>FxRate__c</object>
        <sortField>Start_Date__c</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Fx_rate_selling</name>
        <label>Get Fx rate selling</label>
        <locationX>500</locationX>
        <locationY>783</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Selling_rate_not_null</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Start_Date__c</field>
            <operator>LessThanOrEqualTo</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </filters>
        <filters>
            <field>End_Date__c</field>
            <operator>GreaterThanOrEqualTo</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </filters>
        <filters>
            <field>Active1__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>ExchangeRateType__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Tỷ giá buổi sáng của VCB</stringValue>
            </value>
        </filters>
        <filters>
            <field>ExchangeCurrencyFrom1__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CurrencySelling</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>FxRate__c</object>
        <sortField>Start_Date__c</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_SOL</name>
        <label>Update SOL</label>
        <locationX>1371</locationX>
        <locationY>926</locationY>
        <inputReference>SOLforupdate</inputReference>
    </recordUpdates>
    <start>
        <locationX>922</locationX>
        <locationY>51</locationY>
        <connector>
            <targetReference>Assign_record</targetReference>
        </connector>
        <filterFormula>OR(ISNEW(),AND(NOT(ISCHANGED({!$Record.BlockFlow__c})),OR(
ISCHANGED({!$Record.FxRateID__c}),
ISCHANGED({!$Record.FxRateIDSelling__c}),
ISCHANGED({!$Record.ExchangeRateBuyingUSD__c}),
ISCHANGED({!$Record.ExchangeRateBuying__c}),
ISCHANGED({!$Record.ExchangeRateSellingUSD__c}),
ISCHANGED({!$Record.ExchangeRateSelling__c}),
ISCHANGED({!$Record.BuyingListPriceActual__c}),
ISCHANGED({!$Record.SellingListPriceActual__c}))))</filterFormula>
        <object>Sales_Order_Line__c</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
    <variables>
        <name>Recordforupdate</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Quoteline__c</objectType>
    </variables>
    <variables>
        <name>SOLforupdate</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Sales_Order_Line__c</objectType>
    </variables>
</Flow>
